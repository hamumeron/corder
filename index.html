<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚³ãƒ¼ãƒ‰å…¬é–‹ã‚µã‚¤ãƒˆ</title>
  <style>
    textarea { width: 100%; height: 200px; font-family: monospace; }
    iframe { width: 100%; height: 400px; margin-top: 1rem; border: 1px solid #ccc; }
    button { margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦å…¬é–‹ï¼</h1>
  <textarea id="code" placeholder="HTML/CSS/JS ã‚’æ›¸ã"></textarea>
  <br>
  <button onclick="generateURL()">ğŸ”— å…¬é–‹URLã‚’ç”Ÿæˆ</button>
  <iframe id="preview"></iframe>

  <script>
    const textarea = document.getElementById("code");
    const iframe = document.getElementById("preview");

    // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã¯è¡¨ç¤º
    if (location.hash.startsWith("#code=")) {
      const encoded = location.hash.replace("#code=", "");
      const decoded = decodeURIComponent(atob(encoded));
      textarea.value = decoded;
      iframe.srcdoc = decoded;
    }

    function generateURL() {
      const code = textarea.value;
      const encoded = btoa(encodeURIComponent(code));
      const url = `${location.origin}${location.pathname}#code=${encoded}`;
      prompt("ã“ã®URLã‚’å…±æœ‰ã§ãã¾ã™", url);
      iframe.srcdoc = code;
    }
  </script>
</body>
</html>
